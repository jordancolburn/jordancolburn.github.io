<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Letter Match</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      min-height: 100vh;
      background: #1a1a2e;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 16px;
      transition: background 0.3s;
      position: relative;
      overflow: hidden;
      user-select: none;
      -webkit-user-select: none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    .star {
      position: absolute;
      pointer-events: none;
      z-index: 20;
      animation: popStar 1.2s ease-out both;
    }
    .score-area {
      position: absolute;
      top: 16px;
      right: 20px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .score-icon { font-size: 28px; }
    .score-num { font-size: 28px; font-weight: 800; color: #fff; }
    .streak-badge {
      font-size: 16px;
      color: #FF9FF3;
      font-weight: 700;
      background: rgba(255,159,243,0.15);
      border-radius: 12px;
      padding: 2px 10px;
    }
    .animal-emoji {
      font-size: 72px;
      margin-bottom: 4px;
      transition: transform 0.3s;
      cursor: pointer;
    }
    .animal-name {
      font-size: 22px;
      color: #ccc;
      font-weight: 600;
      margin-bottom: 4px;
      letter-spacing: 1px;
      min-height: 30px;
      transition: opacity 0.3s;
    }
    .animal-name.hidden {
      opacity: 0;
    }
    .animal-name.visible {
      opacity: 1;
    }
    .tap-hint {
      font-size: 13px;
      color: rgba(255,255,255,0.35);
      margin-bottom: 2px;
      transition: opacity 0.3s;
    }
    .tap-hint.hidden { opacity: 0; }
    .prompt-text {
      font-size: 32px;
      font-weight: 800;
      color: #7ED957;
      margin: 12px 0 6px;
      text-shadow: 0 2px 8px rgba(126,217,87,0.3);
    }
    .big-letter {
      font-size: 100px;
      font-weight: 900;
      color: #FFD700;
      text-shadow: 0 4px 20px rgba(255,215,0,0.4);
      line-height: 1.1;
      margin-bottom: 20px;
      transition: transform 0.2s;
    }
    .keyboard {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
      max-width: 420px;
    }
    .key-btn {
      width: 80px;
      height: 80px;
      border-radius: 18px;
      border: 3px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.07);
      color: #fff;
      font-size: 36px;
      font-weight: 800;
      cursor: pointer;
      transition: all 0.15s;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      outline: none;
      -webkit-tap-highlight-color: transparent;
    }
    .key-btn:hover {
      transform: scale(1.1);
      background: rgba(255,255,255,0.13);
    }
    .key-btn.correct-key {
      border-color: #7ED957;
      background: rgba(126,217,87,0.25);
      color: #7ED957;
      box-shadow: 0 0 20px rgba(126,217,87,0.4);
      transform: scale(1.12);
    }
    .feedback {
      margin-top: 20px;
      font-size: 26px;
      font-weight: 800;
      min-height: 40px;
      color: transparent;
      transition: color 0.2s;
    }
    .feedback.correct { color: #7ED957; }
    .feedback.wrong { color: #FF6B6B; }

    @keyframes popStar {
      0% { opacity: 0; transform: scale(0) rotate(0deg) translateY(0); }
      30% { opacity: 1; transform: scale(1.3) rotate(20deg) translateY(-10px); }
      100% { opacity: 0; transform: scale(0.5) rotate(40deg) translateY(-80px); }
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-8px); }
      40% { transform: translateX(8px); }
      60% { transform: translateX(-5px); }
      80% { transform: translateX(5px); }
    }
  </style>
</head>
<body>

  <div class="score-area">
    <span class="score-icon">&#11088;</span>
    <span class="score-num" id="score">0</span>
    <span class="streak-badge" id="streak" style="display:none"></span>
  </div>

  <div class="animal-emoji" id="animalEmoji"></div>
  <div class="tap-hint" id="tapHint">tap animal to see name</div>
  <div class="animal-name hidden" id="animalName"></div>

  <div class="prompt-text">Find the letter</div>
  <div class="big-letter" id="bigLetter"></div>

  <div class="keyboard" id="keyboard"></div>

  <div class="feedback" id="feedback">&nbsp;</div>

<script>
const animals = {
  A: ["\ud83d\udc0a Alligator", "\ud83d\udc1c Ant", "\ud83e\udd85 Albatross"],
  B: ["\ud83d\udc3b Bear", "\ud83e\udd87 Bat", "\ud83d\udc1d Bee"],
  C: ["\ud83d\udc31 Cat", "\ud83d\udc04 Cow", "\ud83e\udd80 Crab"],
  D: ["\ud83d\udc15 Dog", "\ud83d\udc2c Dolphin", "\ud83e\udd86 Duck"],
  E: ["\ud83e\udd85 Eagle", "\ud83d\udc18 Elephant", "\ud83e\udd8e Emu"],
  F: ["\ud83d\udc38 Frog", "\ud83e\udda9 Flamingo", "\ud83d\udc1f Fish"],
  G: ["\ud83e\udd92 Giraffe", "\ud83d\udc10 Goat", "\ud83e\udd8d Gorilla"],
  H: ["\ud83d\udc34 Horse", "\ud83e\udd94 Hedgehog", "\ud83e\udd9b Hippo"],
  I: ["\ud83e\udd8e Iguana", "\ud83e\udeb6 Ibis", "\ud83d\udc1b Inchworm"],
  J: ["\ud83d\udc06 Jaguar", "\ud83e\udeb4 Jellyfish", "\ud83d\udc26 Jay"],
  K: ["\ud83d\udc28 Koala", "\ud83e\udd98 Kangaroo", "\ud83e\ude81 Kite"],
  L: ["\ud83e\udd81 Lion", "\ud83e\udd8e Lizard", "\ud83d\udc1e Ladybug"],
  M: ["\ud83d\udc12 Monkey", "\ud83d\udc2d Mouse", "\ud83e\udd9f Mosquito"],
  N: ["\ud83e\udd8e Newt", "\ud83e\udd89 Nighthawk", "\ud83d\udc02 Narwhal"],
  O: ["\ud83e\udd89 Owl", "\ud83d\udc19 Octopus", "\ud83e\udda6 Otter"],
  P: ["\ud83d\udc27 Penguin", "\ud83d\udc3c Panda", "\ud83e\udd9c Parrot"],
  Q: ["\ud83d\udc26 Quail", "\ud83e\udd94 Quokka", "\ud83e\udeb6 Quetzal"],
  R: ["\ud83d\udc30 Rabbit", "\ud83e\udd9d Raccoon", "\ud83e\udd8f Rhino"],
  S: ["\ud83d\udc0d Snake", "\ud83e\udd88 Shark", "\ud83d\udc3f\ufe0f Squirrel"],
  T: ["\ud83d\udc22 Turtle", "\ud83d\udc2f Tiger", "\ud83e\udd83 Turkey"],
  U: ["\ud83e\udd84 Unicorn", "\ud83e\udd94 Urchin", "\ud83e\udeb6 Umbrellabird"],
  V: ["\ud83e\udd85 Vulture", "\ud83d\udc0d Viper", "\ud83e\udd8c Vicu\u00f1a"],
  W: ["\ud83d\udc0b Whale", "\ud83d\udc3a Wolf", "\ud83d\udc1b Worm"],
  X: ["\ud83d\udc1f X-ray Fish", "\ud83e\udd9c Xenops", "\ud83d\udc26 Xantus"],
  Y: ["\ud83d\udc03 Yak", "\ud83e\udeb6 Yellowhammer", "\ud83e\udd80 Yabby"],
  Z: ["\ud83e\udd93 Zebra", "\ud83d\udc1f Zebrafish", "\ud83e\udd8e Zonkey"]
};

const letters = Object.keys(animals);
const starColors = ["#FFD700", "#FF6B6B", "#7ED957", "#56C1FF", "#FF9FF3", "#FFA94D"];

let currentRound = null;
let currentKeys = [];
let result = null;
let score = 0;
let streak = 0;
let audioCtx = null;
let nameRevealed = false;

function pick() {
  const l = letters[Math.floor(Math.random() * letters.length)];
  const a = animals[l][Math.floor(Math.random() * animals[l].length)];
  return { letter: l, animal: a };
}

function wrongKeys(correct, count) {
  const pool = letters.filter(l => l !== correct);
  const shuffled = pool.sort(() => Math.random() - 0.5);
  return shuffled.slice(0, count);
}

function shuffleArr(arr) {
  return [...arr].sort(() => Math.random() - 0.5);
}

function ensureAudio() {
  if (!audioCtx) {
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  }
  if (audioCtx.state === 'suspended') {
    audioCtx.resume();
  }
}

function playNote(freq, type, startTime, duration) {
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.type = type;
  osc.frequency.value = freq;
  gain.gain.setValueAtTime(0.3, startTime);
  gain.gain.exponentialRampToValueAtTime(0.001, startTime + duration);
  osc.connect(gain);
  gain.connect(audioCtx.destination);
  osc.start(startTime);
  osc.stop(startTime + duration);
}

function playCorrect() {
  ensureAudio();
  const now = audioCtx.currentTime;
  playNote(523.25, 'triangle', now, 0.3);        // C5
  playNote(659.25, 'triangle', now + 0.12, 0.3);  // E5
  playNote(783.99, 'triangle', now + 0.24, 0.3);  // G5
}

function playWrong() {
  ensureAudio();
  const now = audioCtx.currentTime;
  playNote(130.81, 'square', now, 0.4);  // C3
}

function showStars() {
  for (let i = 0; i < 6; i++) {
    const star = document.createElement('div');
    star.className = 'star';
    star.textContent = '\u2b50';
    star.style.left = (Math.random() * 80 + 10) + '%';
    star.style.top = (Math.random() * 40 + 10) + '%';
    star.style.fontSize = (Math.random() * 20 + 16) + 'px';
    star.style.color = starColors[i % starColors.length];
    star.style.animationDelay = (Math.random() * 0.3) + 's';
    document.body.appendChild(star);
    setTimeout(() => star.remove(), 1500);
  }
}

function render() {
  const emoji = currentRound.animal.split(' ')[0];
  const name = currentRound.animal.split(' ').slice(1).join(' ');

  document.getElementById('animalEmoji').textContent = emoji;
  document.getElementById('animalName').textContent = name;

  // Reset name visibility for new round
  const nameEl = document.getElementById('animalName');
  const hintEl = document.getElementById('tapHint');
  if (nameRevealed) {
    nameEl.classList.remove('hidden');
    nameEl.classList.add('visible');
    hintEl.classList.add('hidden');
  } else {
    nameEl.classList.add('hidden');
    nameEl.classList.remove('visible');
    hintEl.classList.remove('hidden');
  }

  document.getElementById('bigLetter').textContent = currentRound.letter;
  document.getElementById('score').textContent = score;

  const streakEl = document.getElementById('streak');
  if (streak >= 3) {
    streakEl.style.display = '';
    streakEl.textContent = '\ud83d\udd25 ' + streak;
  } else {
    streakEl.style.display = 'none';
  }

  // Render keyboard
  const kb = document.getElementById('keyboard');
  kb.innerHTML = '';
  currentKeys.forEach(k => {
    const btn = document.createElement('button');
    btn.className = 'key-btn';
    if (result === 'correct' && k === currentRound.letter) {
      btn.classList.add('correct-key');
    }
    btn.textContent = k;
    btn.addEventListener('click', () => handleKey(k));
    kb.appendChild(btn);
  });

  // Feedback
  const fb = document.getElementById('feedback');
  if (result === 'correct') {
    fb.textContent = '\ud83c\udf89 Great job!';
    fb.className = 'feedback correct';
  } else if (result === 'wrong') {
    fb.textContent = 'Try again!';
    fb.className = 'feedback wrong';
  } else {
    fb.innerHTML = '&nbsp;';
    fb.className = 'feedback';
  }

  // Background color
  if (result === 'correct') {
    document.body.style.background = '#1a3a1a';
  } else if (result === 'wrong') {
    document.body.style.background = '#3a1a1a';
  } else {
    document.body.style.background = '#1a1a2e';
  }

  // Animal emoji animation
  const emojiEl = document.getElementById('animalEmoji');
  if (result === 'correct') {
    emojiEl.style.transform = 'scale(1.2)';
    emojiEl.style.animation = '';
  } else if (result === 'wrong') {
    emojiEl.style.transform = '';
    emojiEl.style.animation = 'shake 0.4s ease';
  } else {
    emojiEl.style.transform = 'scale(1)';
    emojiEl.style.animation = '';
  }

  // Big letter animation
  const letterEl = document.getElementById('bigLetter');
  letterEl.style.transform = result === 'correct' ? 'scale(1.15)' : 'scale(1)';
}

function newRound() {
  currentRound = pick();
  const w = wrongKeys(currentRound.letter, 5);
  currentKeys = shuffleArr([currentRound.letter, ...w]);
  result = null;
  nameRevealed = false;
  render();
}

function handleKey(k) {
  if (result) return;
  ensureAudio();
  if (k === currentRound.letter) {
    playCorrect();
    result = 'correct';
    score++;
    streak++;
    nameRevealed = true; // show name on correct answer
    render();
    showStars();
    setTimeout(() => newRound(), 1400);
  } else {
    playWrong();
    result = 'wrong';
    streak = 0;
    render();
    setTimeout(() => {
      result = null;
      render();
    }, 600);
  }
}

// Tap animal to reveal name
document.getElementById('animalEmoji').addEventListener('click', () => {
  if (!nameRevealed) {
    nameRevealed = true;
    const nameEl = document.getElementById('animalName');
    const hintEl = document.getElementById('tapHint');
    nameEl.classList.remove('hidden');
    nameEl.classList.add('visible');
    hintEl.classList.add('hidden');
  }
});

// Start first round
newRound();
</script>
</body>
</html>
